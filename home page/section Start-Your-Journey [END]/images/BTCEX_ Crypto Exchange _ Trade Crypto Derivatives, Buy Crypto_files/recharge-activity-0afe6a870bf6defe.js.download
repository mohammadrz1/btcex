(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[357],{17633:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/recharge-activity",function(){return n(74356)}])},37613:function(e,t,n){"use strict";n.d(t,{Z:function(){return d}});var r=n(85893),i=n(29950),a=n(55010),c=n(86010),l=n(67294),s=n(22401),o=n(62540),u=n.n(o);function d(e){let{title:t="rules",className:n,src:o}=e,d=(0,l.useRef)(null),[h,g]=(0,l.useState)(!1),x=(0,l.useCallback)(()=>{g(!0)},[]),{lg:m}=(0,a.Gc)(),{IS_BTCEX:p,CDN_HOST:_}=(0,i.hn)();return(0,l.useEffect)(()=>{var e;if(!h||!o.web||!d.current)return;let t=m?o.web:o.app||o.web;t.startsWith("http")||(t="".concat(_,"/").concat(t)),null===(e=d.current.contentWindow)||void 0===e||e.postMessage({source:"btcex-web-activity",action:"load-iframe",data:{iframeProps:{src:t},headerTags:[{tag:"style",type:"text/css",content:"table, tr, td {\n                                vertical-align: middle;\n                            }"}]}},_)},[_,h,m,o.app,o.web]),(0,l.useEffect)(()=>{let e=(0,s.R)(window,"message").subscribe(e=>{if("static-btcex-agent"===e.data.source){let{action:n,data:{height:r}}=e.data;if("load-iframe"===n){var t;null===(t=d.current)||void 0===t||t.style.setProperty("height","".concat(r+30,"px"))}}});return()=>e.unsubscribe()},[]),(0,r.jsx)("iframe",{title:t,className:(0,c.default)(n,u().iframe),width:"100%",height:"100%",ref:d,src:p?"".concat(_,"/rewards/392348962119225344"):"".concat(_,"/rewards/392348527344881664"),onLoad:x})}},7100:function(e,t,n){"use strict";n.d(t,{r:function(){return a}});var r=n(85893),i=n(87357);function a(e){var t;return(0,r.jsxs)(i.Z,{display:"flex",flexDirection:"column",minHeight:"100vh",position:"relative",minWidth:360,style:null===(t=e.styles)||void 0===t?void 0:t.root,children:[e.header,(0,r.jsx)(i.Z,{component:"main",flexGrow:1,position:"relative",minHeight:900,display:"flex",flexDirection:"column",...e.mainBoxProps,children:e.main}),e.footer]})}},74356:function(e,t,n){"use strict";n.r(t),n.d(t,{__N_SSP:function(){return G},default:function(){return L}});var r=n(85893),i=n(7100),a=n(19463),c=n(61925),l=n(86010),s=n(67294),o=n(96886),u=n.n(o);function d(e){return(0,r.jsx)("div",{className:(0,l.default)(u()["mod-title"],e.className),children:(0,r.jsx)("h3",{children:e.title})})}var h=n(64799),g=n(90936),x=n(37613),m=n(55010),p=n(63770),_=n(11163),f=n(26793);function v(e){let{t}=(0,f.$)(),n=(0,_.useRouter)(),{loading:i,isExp:a,isSign:c,onReport:l,isNotStart:s,isLogin:o}=e;return o?s?(0,r.jsx)(m.zx,{disabled:!0,size:40,children:t("Activity.NotStart")}):a?(0,r.jsx)(m.zx,{disabled:!0,size:40,children:t("Activity.isEnd")}):c?(0,r.jsx)(m.zx,{disabled:!0,size:40,children:t("Rewards.EnteredFor")}):(0,r.jsx)(m.zx,{loading:i,size:40,onClick:l,children:t("Partner.JoinNow").toUpperCase()}):(0,r.jsx)(m.zx,{size:40,onClick:()=>{n.push((0,p.uR)(n.asPath))},children:t("Public.Login")})}var b=n(98396),w=n(87357),y=n(15861);let j=e=>e?e.split("\n"):["--"],N=e=>{let{detail:t,button:n,countdown:i}=e,a=(0,b.Z)("(max-width:360px)"),c=(0,b.Z)("(max-width:768px)"),l=(0,b.Z)("(max-width:991px)"),s=null==t?void 0:t.headPictureWeb,o=null==t?void 0:t.headPictureWeb2,u=null==t?void 0:t.headPictureWeb3,d=null==t?void 0:t.headPictureApp,h=j(null==t?void 0:t.title),g=j(null==t?void 0:t.content);return(0,r.jsx)(w.Z,{minHeight:{xs:490,sm:728,md:540},py:{xs:4,sm:6.4,md:0},px:1.6,sx:{width:"100%",height:a?490:c?540:l?790:540,background:"url(".concat(a?d:c?u:l?o:s,") no-repeat center center"),backgroundSize:"auto 100%"},display:"flex",alignItems:{lg:"center"},overflow:"hidden",width:"100%",children:(0,r.jsx)(w.Z,{width:"100%",maxWidth:1200,m:"0 auto",display:"flex",flexDirection:{xs:"column",md:"row"},alignItems:{xs:"center",md:"center"},children:(0,r.jsxs)(w.Z,{width:{xs:"100%"},maxWidth:{md:"60%"},textAlign:{xs:"center",md:"left"},position:"relative",zIndex:1,children:[h.map(e=>(0,r.jsx)(y.Z,{variant:"h2",fontSize:{xs:20,sm:36},color:"text.primary",children:e},e)),(0,r.jsx)(w.Z,{mt:{xs:1.6,sm:4},color:"text.primary",children:g.map(e=>(0,r.jsx)(y.Z,{component:"p",fontSize:{xs:20,sm:36},sx:{wordBreak:"break-word"},children:e},e))}),(0,r.jsx)(w.Z,{display:"flex",flexDirection:"column",alignItems:{xs:"center",md:"flex-start"},children:i}),n]})})})};var k=n(28984),R=n.n(k);let S=e=>{let{data:t,button:n,countdown:i}=e,{lg:a}=(0,m.Gc)();return(0,r.jsx)("div",{className:R()["recharge-poster"],style:{backgroundImage:a?"url(".concat(null==t?void 0:t.headPictureWeb,")"):"url(".concat(null==t?void 0:t.headPictureApp,")")},children:(0,r.jsx)("div",{className:R()["recharge-content-box"],style:{backgroundImage:a?"url(".concat(null==t?void 0:t.headPictureWeb2,"), url(").concat(null==t?void 0:t.headPictureWeb3,")"):""},children:(0,r.jsxs)("div",{className:R()["recharge-content"],children:[i,(0,r.jsx)("div",{className:R()["recharge-button-box"],children:n})]})})})};var C=n(16023),D=n.n(C);let P=e=>{let{days:t,hours:n,minute:i,second:a,isNotStart:c}=e,{t:l}=(0,f.$)();return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:D()["recharge-content-title"],children:(0,r.jsx)("span",{children:l(c?"Activity.toStartTime":"Activity.toEndTime")})}),(0,r.jsx)("ul",{className:D()["recharge-countdown"],children:[{value:t,name:"DAYS"},{value:n,name:"HOURS"},{value:i,name:"MINUTES"},{value:a,name:"SECONDS"}].map((e,t)=>(0,r.jsxs)("li",{className:D()["countdown-list"],children:[(0,r.jsx)("span",{className:D()["countdown-list-value"],children:e.value}),(0,r.jsx)("span",{className:D()["countdown-list-title"],children:e.name}),(0,r.jsx)("span",{className:D()["countdown-list-quote"],children:":"})]},t))})]})};var z=n(10415),W=n(89736),Z=n(97769),E=n(29950),T=n(92738),A=n(80620),O=n(67655),B=n(41664),I=n.n(B),M=n(78899),X=n.n(M);let H=()=>{let e=(0,_.useRouter)(),[t,n]=(0,s.useReducer)(e=>e+1,0),{getAll:i,remove:a,get:c}=(0,Z.Rx)(),{autoSignUp:o}=i(),{days:u,hours:b,minute:y,second:j,start:k}=(0,z.Z)(),[R,C]=(0,s.useState)(),[D,B]=(0,s.useState)(!1),M=c("id"),[H,G]=(0,s.useState)(!1),L=Number(null==R?void 0:R.startTime)>Date.now(),U=R?new Date(Number(R.endTime)).getTime()<Date.now():void 0,[q,F]=(0,s.useState)(!1),{isLogin:Y}=(0,E.hn)(),{t:J,i18n:$}=(0,f.$)(),Q=$.language,V=(0,s.useRef)(),K=(0,W.C)(async()=>{let e=await T.d.myRewards({activityId:M,lang:Q}),{result:t}=null!=e?e:{};t&&F(t.isSign)},[]),ee=(0,W.C)(t=>{if(!Y)return e.push((0,p.DW)("Register",{search:{cb:(0,p.DW)("RechargeActivity",{search:{autoSignUp:"true",id:M}})}}));B(!0),T.d.rewardSignUp({activityId:M,lang:Q}).then(e=>{let{error:n}=null!=e?e:{};if(n){let{code:e}=n;e&&(0,O.b)({error:n,needTip:!1}).then(e=>{(0,m.bZ)({width:"320px",theme:"dark",children:e,success:{text:J("Public.Confirm")},cancel:{text:J("Public.Cancel")}}).then(()=>{t&&t()})});return}return K().then(()=>{let e=(0,g.f0)({classes:{root:X()["activity-recharge-congratulate"]},width:"360px",draggable:!1,theme:"dark",title:"",children:J("Activity.SignInSuccess"),resolve:{label:J("Public.Confirm"),action:()=>{t&&t()}},reject:{label:J("Public.Cancel")}});A._.add(e)})}).finally(()=>{B(!1)})});(0,s.useEffect)(()=>{T.d.rewardActivityDetail({activityId:M,lang:Q}).then(e=>{let{result:t,error:n}=null!=e?e:{};if(n){3600===n.code?(0,O.b)({error:n,needTip:!1}).then(e=>{G(e)}):(0,O.b)({error:n});return}t&&C(t)})},[M,Q,k,J]),(0,s.useEffect)(()=>{let e;if(!R)return;let{startTime:t,endTime:r}=R;return t&&r&&(e=Number(r)<Date.now()?k({expireDate:new Date(Number(r))}):Number(t)>Date.now()?k({expireDate:new Date(Number(t)),onComplete:()=>{n(),e=k({expireDate:new Date(Number(r))})}}):k({expireDate:new Date(Number(r)),onComplete:()=>{n()}})),()=>{e&&e()}},[R,k]),(0,s.useEffect)(()=>{Y&&K()},[K,M,Y]),(0,s.useEffect)(()=>{"true"===o&&ee(()=>{a("autoSignUp")})},[o,ee,a]);let et=X()["recharge-activity-end"];if((0,s.useEffect)(()=>(document.body.style.backgroundColor="#06081a",()=>{document.body.style.backgroundColor=""}),[]),!1!==H)return(0,r.jsxs)("div",{className:X()["recharge-not-support-lang"],children:[(0,r.jsx)("div",{className:X()["recharge-not-support-content"],children:H}),(0,r.jsx)(m.zx,{size:48,onClick:()=>{e.push((0,p.DW)("Home"))},children:J("Public.GoBackHome")})]});if(!R)return null;let en=(0,r.jsx)(P,{isNotStart:L,days:u,hours:b,minute:y,second:j}),er=(0,r.jsx)(v,{isLogin:Y,isNotStart:L,loading:D,isExp:!!U,isSign:q,onReport:()=>ee()});return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(h.p,{title:J("Activity.Recharge.Title")}),(0,r.jsxs)("div",{className:(0,l.default)(X()["recharge-activity"],et,Q,{[et]:!0===U}),children:[0===R.detailModel&&(0,r.jsx)(S,{data:R,isNotStart:L,countdown:en,button:er}),1===R.detailModel&&(0,r.jsx)(N,{detail:R,countdown:en,button:er}),(0,r.jsx)(d,{className:X()["rules-desc-title"],title:J("Rewards.Rules")}),(0,r.jsx)("div",{className:X()["rules-desc"],ref:V,children:(0,r.jsx)(x.Z,{src:{web:R.activityRulesWeb,app:R.activityRulesApp}})})]}),(null==R?void 0:R.floatingWindowLink)&&(0,r.jsx)("div",{className:X()["float-link"],children:(0,r.jsx)(I(),{target:"_blank",href:R?R.floatingWindowLink:"",children:(0,r.jsx)(w.Z,{component:"img",src:R?R.floatingWindowPicture:"",alt:"float-link"})})})]})};H.theme="dark",H.getLayout=e=>(0,r.jsx)(i.r,{header:(0,r.jsx)(c.Z,{}),footer:(0,r.jsx)(a.$,{}),main:e});var G=!0,L=H},62540:function(e){e.exports={iframe:"IframeAutoHeight_iframe__rXo2X"}},28984:function(e){e.exports={"recharge-poster":"RechargeBannerOld_recharge-poster___Xzh2","recharge-content-box":"RechargeBannerOld_recharge-content-box__cDk15","recharge-content":"RechargeBannerOld_recharge-content__JP7fT","recharge-button-box":"RechargeBannerOld_recharge-button-box__Sy3Vq","recharge-button":"RechargeBannerOld_recharge-button__DxNC0","sign-up-success":"RechargeBannerOld_sign-up-success__kIfTO","sign-up-click-icon":"RechargeBannerOld_sign-up-click-icon__AXGCw"}},16023:function(e){e.exports={"recharge-countdown":"RechargeCountdown_recharge-countdown__zED3t","recharge-content-title":"RechargeCountdown_recharge-content-title__xYcj5","countdown-list":"RechargeCountdown_countdown-list__BZZei","countdown-list-quote":"RechargeCountdown_countdown-list-quote__zNSZD","countdown-list-value":"RechargeCountdown_countdown-list-value__zGmCg","countdown-list-title":"RechargeCountdown_countdown-list-title__ye8WS"}},96886:function(e){e.exports={"mod-title":"ModTitle_mod-title__yYyjS",symbol:"ModTitle_symbol__73Cnz","mod-sub-title":"ModTitle_mod-sub-title__zQWB4"}},78899:function(e){e.exports={"recharge-activity":"recharge-activity_recharge-activity__OvTTh","activity-link":"recharge-activity_activity-link__bA5vi","activity-process":"recharge-activity_activity-process__7b8MY","recharge-not-support-lang":"recharge-activity_recharge-not-support-lang__mWcJu","recharge-not-support-content":"recharge-activity_recharge-not-support-content__DRqF3","rules-desc-title":"recharge-activity_rules-desc-title__bIXca","rules-desc":"recharge-activity_rules-desc__ak0YJ","float-link":"recharge-activity_float-link__lEFXa","activity-recharge-congratulate":"recharge-activity_activity-recharge-congratulate__r74as"}}},function(e){e.O(0,[8677,8903,3373,9463,9774,2888,179],function(){return e(e.s=17633)}),_N_E=e.O()}]);